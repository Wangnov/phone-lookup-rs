![Phone Lookup RS](assets/banner.png)

<div align="center">

[![Rust](https://img.shields.io/badge/rust-1.70+-orange.svg?style=for-the-badge&logo=rust)](https://www.rust-lang.org/)
[![License](https://img.shields.io/badge/license-MIT-green.svg?style=for-the-badge)](LICENSE)
[![Actix Web](https://img.shields.io/badge/Actix_Web-4.11-blue.svg?style=for-the-badge)](https://actix.rs/)
[![Performance](https://img.shields.io/badge/Response_Time-<1ms-brightgreen.svg?style=for-the-badge)](#-æ€§èƒ½æŒ‡æ ‡)

[![GitHub Stars](https://img.shields.io/github/stars/wangnov/phone-lookup-rs?style=social)](https://github.com/wangnov/phone-lookup-rs/stargazers)
[![GitHub Forks](https://img.shields.io/github/forks/wangnov/phone-lookup-rs?style=social)](https://github.com/wangnov/phone-lookup-rs/network/members)
[![GitHub Issues](https://img.shields.io/github/issues/wangnov/phone-lookup-rs?style=social)](https://github.com/wangnov/phone-lookup-rs/issues)

</div>

---

## âœ¨ ç‰¹æ€§

- ğŸ” **å¿«é€ŸæŸ¥è¯¢**ï¼šåŸºäºäºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼Œå¹³å‡æŸ¥è¯¢æ—¶é—´ < 1ms
- ğŸ§  **æ™ºèƒ½ç¼“å­˜**ï¼šå†…ç½® LRU ç¼“å­˜ï¼Œæå‡çƒ­ç‚¹æ•°æ®æŸ¥è¯¢æ€§èƒ½
- âš¡ **é«˜å¹¶å‘**ï¼šåŸºäº Actix Web æ¡†æ¶ï¼Œæ”¯æŒé«˜å¹¶å‘è¯·æ±‚
- ğŸ“Š **è¯¦ç»†æ—¥å¿—**ï¼šå®Œæ•´çš„è¯·æ±‚æ—¥å¿—å’Œæ€§èƒ½ç›‘æ§
- ğŸ›¡ï¸ **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†å’Œä¸­æ–‡é”™è¯¯ä¿¡æ¯
- ğŸ§ª **å®Œæ•´æµ‹è¯•**ï¼šåŒ…å«å•å…ƒæµ‹è¯•ã€æ€§èƒ½æµ‹è¯•å’Œå¹¶å‘æµ‹è¯•

## ğŸ“Š æ•°æ®ç»Ÿè®¡

- å½’å±åœ°ä¿¡æ¯åº“æ–‡ä»¶å¤§å°ï¼š4557kb
- å½’å±åœ°ä¿¡æ¯åº“æœ€åæ›´æ–°ï¼š2025å¹´02æœˆ
- æ‰‹æœºå·æ®µè®°å½•æ¡æ•°ï¼š517258
- æ”¯æŒè¿è¥å•†ï¼šä¸­å›½ç§»åŠ¨ã€ä¸­å›½è”é€šã€ä¸­å›½ç”µä¿¡ã€ä¸­å›½å¹¿ç”µåŠå…¶è™šæ‹Ÿè¿è¥å•†

## phone.datæ–‡ä»¶æ ¼å¼
```
    | 4 bytes |                     <- phone.dat ç‰ˆæœ¬å·ï¼ˆå¦‚ï¼š1701å³17å¹´1æœˆä»½ï¼‰
    ------------
    | 4 bytes |                     <-  ç¬¬ä¸€ä¸ªç´¢å¼•çš„åç§»
    -----------------------
    |  offset - 8            |      <-  è®°å½•åŒº
    -----------------------
    |  index                 |      <-  ç´¢å¼•åŒº
    -----------------------
```
1. å¤´éƒ¨ä¸º8ä¸ªå­—èŠ‚ï¼Œç‰ˆæœ¬å·ä¸º4ä¸ªå­—èŠ‚ï¼Œç¬¬ä¸€ä¸ªç´¢å¼•çš„åç§»ä¸º4ä¸ªå­—èŠ‚ï¼›
2. è®°å½•åŒº ä¸­æ¯æ¡è®°å½•çš„æ ¼å¼ä¸º"<çœä»½>|<åŸå¸‚>|<é‚®ç¼–>|<é•¿é€”åŒºå·>\0"ã€‚ æ¯æ¡è®°å½•ä»¥'\0'ç»“æŸï¼›
3. ç´¢å¼•åŒº ä¸­æ¯æ¡è®°å½•çš„æ ¼å¼ä¸º"<æ‰‹æœºå·å‰ä¸ƒä½><è®°å½•åŒºçš„åç§»><å¡ç±»å‹>"ï¼Œæ¯ä¸ªç´¢å¼•çš„é•¿åº¦ä¸º9ä¸ªå­—èŠ‚ï¼›

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…å’Œè¿è¡Œ

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/wangnov/phone-lookup-rs.git
cd phone-lookup-rs

# ç¼–è¯‘å’Œè¿è¡Œ
cargo run

# å‘å¸ƒæ¨¡å¼è¿è¡Œï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰
cargo run --release
```

### ğŸ“‹ é…ç½®æ–‡ä»¶

é¡¹ç›®æ”¯æŒé€šè¿‡ `config.toml` æ–‡ä»¶è¿›è¡Œé…ç½®ï¼š

```toml
[server]
host = "0.0.0.0"
port = 8080
workers = 0  # 0 = è‡ªåŠ¨æ£€æµ‹CPUæ ¸å¿ƒæ•°

[cache]
enabled = true
max_size = 1000

[logging]
level = "info"
```

## ğŸ”Œ API æ¥å£

### 1. è·¯å¾„å‚æ•°æŸ¥è¯¢

```bash
curl "http://127.0.0.1:8080/query/18086834111"
```

### 2. æŸ¥è¯¢å‚æ•°æŸ¥è¯¢

```bash
curl "http://127.0.0.1:8080/query?phone=18086834111"
```

### 3. å¥åº·æ£€æŸ¥

```bash
curl "http://127.0.0.1:8080/health"
```

### å“åº”æ ¼å¼

```json
{
    "code": 0,
    "data": {
        "province": "å››å·",
        "city": "æˆéƒ½",
        "zip_code": "610000",
        "area_code": "028",
        "card_type": "ä¸­å›½ç”µä¿¡"
    },
    "success": true,
    "message": "success"
}
```

### é”™è¯¯å“åº”

```json
{
    "code": -1,
    "data": null,
    "success": false,
    "message": "æ‰‹æœºå·ç æœªæ‰¾åˆ°"
}
```

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæ‰€æœ‰æµ‹è¯•

```bash
cargo test
```

### è¿è¡Œæ€§èƒ½æµ‹è¯•

```bash
cargo test --release -- --nocapture performance_tests
```

### æµ‹è¯•è¦†ç›–

- âœ… **åŠŸèƒ½æµ‹è¯•**ï¼šåŸºæœ¬æŸ¥è¯¢åŠŸèƒ½
- âœ… **è¾¹ç•Œæµ‹è¯•**ï¼šæ— æ•ˆé•¿åº¦ã€æ ¼å¼é”™è¯¯
- âœ… **æ€§èƒ½æµ‹è¯•**ï¼š10,000 æ¬¡æŸ¥è¯¢æ€§èƒ½åŸºå‡†
- âœ… **ç¼“å­˜æµ‹è¯•**ï¼šç¼“å­˜å‘½ä¸­æ€§èƒ½éªŒè¯
- âœ… **å¹¶å‘æµ‹è¯•**ï¼šå¤šçº¿ç¨‹å¹¶å‘æŸ¥è¯¢

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

- **æŸ¥è¯¢é€Ÿåº¦**ï¼šå•æ¬¡æŸ¥è¯¢ < 1ms
- **ç¼“å­˜å‘½ä¸­**ï¼šçƒ­ç‚¹æ•°æ®æŸ¥è¯¢ < 0.1ms
- **å¹¶å‘æ”¯æŒ**ï¼šæ”¯æŒæ•°åƒä¸ªå¹¶å‘è¿æ¥
- **å†…å­˜å ç”¨**ï¼š< 50MBï¼ˆåŒ…å«æ•°æ®åº“å’Œç¼“å­˜ï¼‰

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

- **Web æ¡†æ¶**ï¼šActix Web 4.11.0
- **å¼‚æ­¥è¿è¡Œæ—¶**ï¼šTokio 1.46.1
- **åºåˆ—åŒ–**ï¼šSerde 1.0.219
- **æ—¥å¿—ç³»ç»Ÿ**ï¼šTracing + Tracing-subscriber
- **é”™è¯¯å¤„ç†**ï¼šThiserror 1.0.69

### æ•°æ®ç»“æ„ä¼˜åŒ–

- **ç´¢å¼•ç»“æ„**ï¼šå†…å­˜ä¸­çš„æœ‰åºæ•°ç»„ï¼Œæ”¯æŒäºŒåˆ†æŸ¥æ‰¾
- **ç¼“å­˜ç­–ç•¥**ï¼šåŸºäº HashMap çš„ç®€å• LRU ç¼“å­˜
- **å†…å­˜ç®¡ç†**ï¼šä½¿ç”¨ Arc<T> å®ç°é›¶æ‹·è´æ•°æ®å…±äº«
- **å¹¶å‘å®‰å…¨**ï¼šä½¿ç”¨ Mutex ä¿æŠ¤ç¼“å­˜è®¿é—®

## ğŸ”§ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
phone-lookup-rs/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs          # Web æœåŠ¡å…¥å£
â”‚   â”œâ”€â”€ lib.rs           # æ ¸å¿ƒæŸ¥è¯¢é€»è¾‘
â”‚   â””â”€â”€ config.rs        # é…ç½®ç®¡ç†æ¨¡å—
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ demo_test.rs     # æµ‹è¯•ç”¨ä¾‹  
â”œâ”€â”€ config.toml          # é…ç½®æ–‡ä»¶
â”œâ”€â”€ phone.dat           # æ•°æ®åº“æ–‡ä»¶
â”œâ”€â”€ Cargo.toml          # ä¾èµ–é…ç½®
â”œâ”€â”€ README.md           # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ .gitignore          # Git å¿½ç•¥è§„åˆ™
```

### ç¼–è¯‘ä¼˜åŒ–

å‘å¸ƒç‰ˆæœ¬å¯ç”¨äº†ä»¥ä¸‹ä¼˜åŒ–ï¼š

```toml
[profile.release]
opt-level = 3        # æœ€é«˜ä¼˜åŒ–çº§åˆ«
lto = true          # é“¾æ¥æ—¶ä¼˜åŒ–
codegen-units = 1   # å•ä¸ªä»£ç ç”Ÿæˆå•å…ƒ
panic = "abort"     # å¼‚å¸¸æ—¶ç›´æ¥ç»ˆæ­¢
strip = true        # åˆ é™¤è°ƒè¯•ç¬¦å·
```

## ğŸš€ éƒ¨ç½²å»ºè®®

### Docker éƒ¨ç½²

```dockerfile
FROM rust:alpine as builder
WORKDIR /app
COPY . .
RUN cargo build --release

FROM alpine:latest
RUN apk add --no-cache ca-certificates
COPY --from=builder /app/target/release/phone-lookup-rs /usr/local/bin/
COPY phone.dat /usr/local/bin/
EXPOSE 8080
CMD ["phone-lookup-rs"]
```

### æ€§èƒ½è°ƒä¼˜

1. **ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ release æ¨¡å¼**
2. **æ ¹æ® CPU æ ¸å¿ƒæ•°è°ƒæ•´ workers**
3. **é€‚å½“è°ƒæ•´ç¼“å­˜å¤§å°**
4. **å¯ç”¨ gzip å‹ç¼©**
5. **é…ç½®åå‘ä»£ç†ï¼ˆå¦‚ Nginxï¼‰**

## ğŸ“ æ›´æ–°æ—¥å¿—

### v0.1.0 (2025-08-05)
- âœ¨ æ·»åŠ æ™ºèƒ½ç¼“å­˜æœºåˆ¶
- ğŸ› ä¿®å¤é”™è¯¯å¤„ç†å’Œæ—¥å¿—
- âš¡ ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
- ğŸ§ª å®Œå–„æµ‹è¯•è¦†ç›–
- ğŸ“ æ›´æ–°æ–‡æ¡£å’Œé…ç½®

## ğŸ¯ è·¯çº¿å›¾

- [ ] æ·»åŠ  Prometheus ç›‘æ§æŒ‡æ ‡
- [ ] å®ç°æ›´æ™ºèƒ½çš„ LRU ç¼“å­˜
- [ ] æ·»åŠ  API é™æµåŠŸèƒ½
- [ ] æ”¯æŒæ‰¹é‡æŸ¥è¯¢æ¥å£
- [ ] æ·»åŠ æ•°æ®åº“çƒ­æ›´æ–°åŠŸèƒ½
- [ ] å®ç°åˆ†å¸ƒå¼éƒ¨ç½²æ”¯æŒ

## ğŸ™ è‡´è°¢

æœ¬é¡¹ç›®åŸºäº [kurisu994/phone_data](https://github.com/kurisu994/phone_data) è¿›è¡ŒäºŒæ¬¡å¼€å‘å’Œä¼˜åŒ–ã€‚

æ„Ÿè°¢åŸä½œè€… [kurisu994](https://github.com/kurisu994) æä¾›çš„ä¼˜ç§€åŸºç¡€å®ç°ï¼ŒåŒ…æ‹¬ï¼š
- æ•°æ®åº“æ–‡ä»¶æ ¼å¼è®¾è®¡
- åŸºç¡€æŸ¥è¯¢ç®—æ³•å®ç°
- é¡¹ç›®æ¶æ„è®¾è®¡

åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæœ¬é¡¹ç›®è¿›è¡Œäº†ä»¥ä¸‹é‡è¦æ”¹è¿›ï¼š
- ğŸš€ **æ€§èƒ½ä¼˜åŒ–**ï¼šä½¿ç”¨ RwLock æ›¿ä»£ Mutexï¼Œæå‡å¹¶å‘è¯»æ€§èƒ½
- ğŸ§  **æ™ºèƒ½ç¼“å­˜**ï¼šå®ç° LRU ç¼“å­˜æœºåˆ¶ï¼Œæ˜¾è‘—æå‡çƒ­ç‚¹æ•°æ®æŸ¥è¯¢é€Ÿåº¦  
- ğŸ“Š **ç›‘æ§ç»Ÿè®¡**ï¼šæ·»åŠ æŸ¥è¯¢ç»Ÿè®¡å’Œç¼“å­˜å‘½ä¸­ç‡ç›‘æ§
- ğŸ›¡ï¸ **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„é”™è¯¯åˆ†ç±»å’Œä¸­æ–‡é”™è¯¯ä¿¡æ¯
- ğŸ§ª **æµ‹è¯•è¦†ç›–**ï¼šæ–°å¢å•å…ƒæµ‹è¯•ã€æ€§èƒ½æµ‹è¯•å’Œå¹¶å‘æµ‹è¯•
- ğŸ“ **æ–‡æ¡£å®Œå–„**ï¼šè¯¦ç»†çš„ API æ–‡æ¡£å’Œä»£ç æ³¨é‡Š
- âš™ï¸ **é…ç½®éªŒè¯**ï¼šä¸¥æ ¼çš„é…ç½®å‚æ•°éªŒè¯æœºåˆ¶

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚
